{"version":3,"file":"angular-file-process.min.js","sources":["angular-file-process.js"],"names":["angular","factory","define","amd","app","module","directive","$fileProcess","link","isHTML5","scope","element","attributes","bind","event","dataTransfer","originalEvent","preventDefault","stopPropagation","$broadcast","$emit","files","$eval","ngFileDrop","dropEffect","noop","$on","addClass","ngFileOver","removeClass","data","this","options","ngFileSelect","attr","prop","removeAttr","$rootScope","$window","Process","params","extend","autoStart","removeAfterProc","Processor","_construct","_destruct","_process","proc","trigger","EVT","IN_SUCCESS","_abort","IN_ABORT","itemList","ItemList","filters","_status","STAT","UNPROCESSED","_timestamp","Date","now","prototype","Item","unshift","_queueLimitFilter","_emptyFileFilter","addFiles","IN_PROGRESS","_onProgress","_onAbort","IN_ERROR","_onError","_onSuccess","IN_LOAD","IN_COMPLETE","PROC_PROGRESS","PROC_COMPLETE","_onComplete","list","limit","Number","MAX_VALUE","_nextItemIdx","uid","file","removeItem","progress","constructor","File","FormData","handler","arguments","apply","oriLength","length","fileList","forEach","isValid","every","filter","call","item","BEFORE_ADDING_A_FILE","add","AFTER_ADDING_A_FILE","WHEN_ADDING_A_FILE_FAILED","AFTER_ADDING_ALL","_updateProgress","_render","processAll","processItem","process","findItemsReadyToBeProcessed","setToBeProcessed","PROCESSING","BEFORE_PROCESSING_ALL","_processNextItem","abortItem","abort","abortAll","ABORT_ALL","ABORTED","findItemsInProcessing","destruct","remove","removeAll","clear","findOneItemToBeProcessed","SUCCEEDED","findItemsToBeProcessed","ERROR","COMPLETE_ALL","itemProgress","total","processed","countItemsProcessed","ratio","current","Math","round","PROGRESS_ALL","$$phase","$digest","isReady","i","get","isToBeProcessed","isProcessing","num","isProcessed","isElement","size","push","index","indexOf","removeByIndex","appendArray","_list","concat","splice","pop","itemFilter","id","BEFORE_PROCESSING_ITEM","isSuccess","isError","isAborted","TO_BE_PROCESSED","PROGRESS_ITEM","ABORT_ITEM","SUCCESS_ITEM","ERROR_ITEM","api","create"],"mappings":";;;;;CAIC,SAASA,EAASC,GACf,MAAsB,kBAAXC,SAAyBA,OAAOC,QACvCD,QAAO,wBAAyB,WAAY,SAASF,GACjD,MAAOC,GAAQD,KAGZC,EAAQD,IAErBA,SAAW,KAAM,SAASA,GAC5B,GAAII,GAAMJ,EAAQK,OAAO,wBAwyBrB,OAtyBJD,GAAIE,UAAU,cAAe,eAAgB,SAAUC,GACnD,YAEA,QAEIC,KAAOD,EAAaE,QAAyB,SAAUC,EAAOC,EAASC,GACnED,EACKE,KAAK,OAAQ,SAAUC,GACpB,GAAIC,GAAeD,EAAMC,aACrBD,EAAMC,aACND,EAAME,cAAcD,YACnBA,KACLD,EAAMG,iBACNH,EAAMI,kBACNR,EAAMS,WAAW,wBACjBT,EAAMU,MAAM,WAAYL,EAAaM,MAAOX,EAAMY,MAAMV,EAAWW,gBAEtEV,KAAK,WAAY,SAAUC,GACxB,GAAIC,GAAeD,EAAMC,aACrBD,EAAMC,aACND,EAAME,cAAcD,YAExBD,GAAMG,iBACNH,EAAMI,kBACNH,EAAaS,WAAa,OAC1Bd,EAAMS,WAAW,uBAEpBN,KAAK,YAAa,WACfH,EAAMS,WAAW,2BAvBCnB,EAAQyB,SA6B9CrB,EAAIE,UAAU,aAAc,WACxB,YAEA,QACIE,KAAM,SAAUE,EAAOC,EAASC,GAC5BF,EAAMgB,IAAI,oBAAqB,WAC3Bf,EAAQgB,SAASf,EAAWgB,YAAc,kBAE9ClB,EAAMgB,IAAI,uBAAwB,WAC9Bf,EAAQkB,YAAYjB,EAAWgB,YAAc,sBAM7DxB,EAAIE,UAAU,gBAAkB,eAAgB,SAAUC,GACtD,OACIC,KAAM,SAASE,EAAOC,EAASC,GACvBL,EAAaE,QAEbE,EAAQE,KAAK,SAAU,WACnB,GAAIiB,GAAOC,KAAKV,MACZW,EAAUtB,EAAMY,MAAMV,EAAWqB,aAErCvB,GAAMU,MAAM,WAAYU,EAAME,GAE1BrB,EAAQuB,KAAK,aACbvB,EAAQwB,KAAK,QAAS,SAM9BxB,EAAQyB,WAAW,YACnBzB,EAAQE,KAAK,SAAU,WACnB,GAAIiB,GAAOC,KACPC,EAAUtB,EAAMY,MAAMV,EAAWqB,aAErCvB,GAAMU,MAAM,WAAYU,EAAME,MAItCrB,EAAQwB,KAAK,QAAS,WAIlC/B,EAAIH,QAAQ,gBAAiB,aAAc,UAAW,SAASoC,EAAYC,GACvE,YAOA,SAASC,GAAQC,GAGbxC,EAAQyC,OAAOV,MAEXW,WAAoB,EACpBC,iBAAoB,EACpBC,WAEQC,WAAa,aAEbC,UAAa,aAEbC,SAAa,WAAWhB,KAAKiB,KAAKC,QAAQC,EAAIC,WAAYpB,OAE1DqB,OAAa,WAAWrB,KAAKiB,KAAKC,QAAQC,EAAIG,SAAUtB,QAEhErB,MAAoB2B,EACpBiB,SAAoB,GAAIC,OACxBC,WAEAC,QAAoBC,EAAKC,YACzBC,WAAoBC,KAAKC,OAC1BtB,GAGqC,mBAA7BT,MAAKa,UAAUmB,WAEtB/D,EAAQyC,OAAOuB,EAAKD,UAAWhC,KAAKa,WAIxCb,KAAKyB,QAAQS,QAAQlC,KAAKmC,mBAC1BnC,KAAKyB,QAAQS,QAAQlC,KAAKoC,kBAG1BpC,KAAKrB,MAAMgB,IAAI,WAAY,SAASZ,EAAOO,EAAOW,GAC9ClB,EAAMI,kBACNa,KAAKqC,SAAS/C,EAAOW,IACvBnB,KAAKkB,OAGPA,KAAKlB,KAAKqC,EAAImB,YAAcL,EAAKD,UAAUO,aAC3CvC,KAAKlB,KAAKqC,EAAIG,SAAcW,EAAKD,UAAUQ,UAC3CxC,KAAKlB,KAAKqC,EAAIsB,SAAcR,EAAKD,UAAUU,UAC3C1C,KAAKlB,KAAKqC,EAAIC,WAAca,EAAKD,UAAUW,YAC3C3C,KAAKlB,KAAKqC,EAAIyB,QAAcX,EAAKD,UAAUW,YAC3C3C,KAAKlB,KAAKqC,EAAI0B,YAAcZ,EAAKD,UAAUW,YAC3C3C,KAAKlB,KAAKqC,EAAI2B,cAAkB9C,KAAKuC,aACrCvC,KAAKlB,KAAKqC,EAAI4B,cAAkB/C,KAAKgD,aAuVzC,QAASxB,GAASf,GAEdxC,EAAQyC,OAAOV,MACXiD,QACAC,MAAgBC,OAAOC,UACvBC,aAAgB,GACjB5C,GAgGP,QAASwB,GAAKxB,GAGVT,KAAKsD,IAAMA,IAEXrF,EAAQyC,OAAOV,MACXuD,KAAgB,KAChBtC,MACIuC,WAAY,aACZtC,QAAY,cAEhBuC,SAAgB,EAChB/B,QAAgBC,EAAKC,aACtBnB,GAGHT,KAAKc,aAzcTN,EAAQwB,WACJ0B,YAAalD,EAOb9B,WAAY6B,EAAQoD,OAAQpD,EAAQqD,UAQpC9E,KAAM,SAASC,EAAO8E,GAClB,MAAO7D,MAAKrB,MAAMgB,IAAIK,KAAK6B,WAAa,IAAM9C,EAAO8E,EAAQ/E,KAAKkB,QAQtEkB,QAAS,SAASnC,GACd+E,UAAU,GAAK9D,KAAK6B,WAAa,IAAM9C,EACvCiB,KAAKrB,MAAMS,WAAW2E,MAAM/D,KAAKrB,MAAOmF,YAQ5CzB,SAAU,SAAS/C,EAAOW,GACtB,GAAI+D,GAAYhE,KAAKuB,SAAS0C,SAC1BC,EAAW,UAAY5E,GAAQA,GAASA,EAG5CrB,GAAQkG,QAAQD,EACZ,SAASX,GAEL,GAAIa,GAAWpE,KAAKyB,QAAQwC,OAAgBjE,KAAKyB,QAAQ4C,MAAM,SAASC,GACpE,MAAOA,GAAOC,KAAKvE,KAAMuD,IAC1BvD,OAFkC,EAKjCwE,EAAO,GAAIvC,GAAKhE,EAAQyC,QACxB6C,KAAMA,EACNtC,KAAMjB,MACPC,GAECmE,IACApE,KAAKkB,QAAQC,EAAIsD,qBAAsBD,GACvCxE,KAAKuB,SAASmD,IAAIF,GAClBxE,KAAKkB,QAAQC,EAAIwD,oBAAqBH,IAGtCxE,KAAKkB,QAAQC,EAAIyD,0BAA2BJ,IAGtDxE,MAEEA,KAAKuB,SAAS0C,SAAWD,GACzBhE,KAAKkB,QAAQC,EAAI0D,iBAAkB7E,KAAKuB,UAExCvB,KAAK8E,mBAGL9E,KAAK+E,UAGL/E,KAAKW,WACLX,KAAKgF,cAQbC,YAAa,SAAST,GAClBA,EAAKU,WAMTF,WAAY,WAERhF,KAAKmF,8BAA8BhB,QAAQ,SAASK,GAEhDA,EAAKY,qBAGTpF,KAAK0B,QAAUC,EAAK0D,WACpBrF,KAAKkB,QAAQC,EAAImE,sBAAuBtF,MACxCA,KAAKuF,oBAOTC,UAAW,SAAShB,GAChBA,EAAKiB,SAMTC,SAAU,WACN1F,KAAKkB,QAAQC,EAAIwE,UAAW3F,MAG5BA,KAAK0B,QAAUC,EAAKiE,QAGpB5F,KAAK6F,wBAAwB1B,QAAQ,SAASK,GAC1CA,EAAKiB,WAQbjC,WAAY,SAASgB,GACjBA,EAAKsB,WACL9F,KAAKuB,SAASwE,OAAOvB,GACrBxE,KAAK8E,mBAMTkB,UAAW,WAEPhG,KAAKuB,SAAS0E,QACdjG,KAAK8E,mBAMTS,iBAAkB,WAEd,GAAIvF,KAAK0B,UAAYC,EAAK0D,WAAY,CAElC,GAAIb,GAAOxE,KAAKkG,0BAGJ,OAAR1B,EACAxE,KAAKiF,YAAYT,IAKjBxE,KAAK0B,QAAUC,EAAKwE,UAEpBnG,KAAKgD,YAAY7B,EAAI4B,cAAeyB,MAUhDjC,YAAa,SAASxD,EAAOyF,GAEzBxE,KAAK8E,gBAAgBN,EAAKf,WAQ9BT,YAAa,SAASjE,EAAOyF,GAQzB,OANIxE,KAAKY,iBACLZ,KAAKwD,WAAWgB,GAGpBxE,KAAK8E,kBAEG9E,KAAK0B,SAET,IAAKC,GAAK0D,WAGN,WADArF,MAAKuF,kBAIT,KAAK5D,GAAKiE,QAKN,WAHA5F,MAAKoG,yBAAyBjC,QAAQ,SAASK,GAC3CA,EAAKiB,SAIb,KAAK9D,GAAKwE,UACV,IAAKxE,GAAK0E,MAGN,WADArG,MAAKkB,QAAQC,EAAImF,aAActG,KAAKuB,SAGxC,SACI,SAcZuD,gBAAiB,SAASyB,GAEtB,GAAIvG,KAAKY,gBACLZ,KAAKyD,SAAY8C,GAAgB,MAEhC,CACD,GAAIC,GAAYxG,KAAKuB,SAAS0C,SAC1BwC,EAAYzG,KAAK0G,sBACjBC,EAAY,IAAMH,EAClBI,GAAaL,GAAgB,GAAKI,EAAQ,GAE9C3G,MAAKyD,SAAWoD,KAAKC,MAAML,EAAYE,EAAQC,GAGnD5G,KAAKkB,QAAQC,EAAI4F,aAAc/G,KAAMA,KAAKyD,UAE1CzD,KAAK+E,WAQTA,QAAS,WACA/E,KAAKrB,MAAMqI,SAAShH,KAAKrB,MAAMsI,WAOxC9B,4BAA6B,WACzB,MAAOnF,MAAKuB,SAAS+C,OAAO,SAASE,GACjC,MAAOA,GAAK0C,aAQpBhB,yBAA0B,WAEtB,IAAK,GAAIiB,GAAI,EAAGA,EAAInH,KAAKuB,SAAS0C,SAAUkD,IACxC,GAAInH,KAAKuB,SAAS6F,IAAID,GAAGE,kBACrB,MAAOrH,MAAKuB,SAAS6F,IAAID,EAGjC,OAAO,OAOXf,uBAAwB,WACpB,MAAOpG,MAAKuB,SAAS+C,OAAO,SAASE,GACjC,MAAOA,GAAK6C,qBAQpBxB,sBAAuB,WACnB,MAAO7F,MAAKuB,SAAS+C,OAAO,SAASE,GACjC,MAAOA,GAAK8C,kBAQpBZ,oBAAqB,WACjB,GAAIa,GAAM,CAQV,OANAvH,MAAKuB,SAAS0B,KAAKkB,QAAQ,SAASK,GAC5BA,EAAKgD,eACLD,MAIDA,GASXnF,iBAAkB,SAASmB,GACvB,MAAOtF,GAAQwJ,UAAUlE,IAAQ,IAASA,EAAKmE,MAQnDvF,kBAAmB,WACf,MAAOnC,MAAKuB,SAAS0C,SAAWjE,KAAKuB,SAAS2B,QAoBtD1B,EAASQ,WACL0B,YAAalC,EAMbkD,IAAK,SAASF,GACVxE,KAAKiD,KAAK0E,KAAKnD,IAOnBuB,OAAQ,SAASvB,GACb,GAAIoD,GAAQ5H,KAAKiD,KAAK4E,QAAQrD,EAC9BxE,MAAK8H,cAAcF,IAQvBR,IAAK,SAASQ,GACV,MAAO5H,MAAKiD,KAAK2E,IAOrBG,YAAa,SAASC,GAClBhI,KAAKiD,KAAOjD,KAAKiD,KAAKgF,OAAOD,IAOjCF,cAAe,SAASF,GAChBA,EAAQ,IACR5H,KAAKiD,KAAKiF,OAAON,EAAO,IAMhC3B,MAAO,WACH,KAAOjG,KAAKiD,KAAKgB,OAAS,GACtBjE,KAAKiD,KAAKkF,OASlB7D,OAAQ,SAAS8D,GACb,MAAOpI,MAAKiD,KAAKqB,OAAO,SAASE,GAC7B,MAAO4D,GAAW5D,MAQ1BP,OAAQ,WACJ,MAAOjE,MAAKiD,KAAKgB,QAQrB4D,QAAS,SAASrD,GACd,MAAOxE,MAAKiD,KAAK4E,QAAQrD,IAKjC,IAAIlB,GAAM,WAAY,GAAI+E,GAAG,CAAE,OAAO,YAAoC,MAAP,KAAfvE,UAAU,KAAOuE,EAAG,GAASA,OA2BjFpG,GAAKD,WACD0B,YAAazB,EAIb6D,SAAU,WAEF9F,KAAKsH,gBACLtH,KAAKyF,QAITzF,KAAKe,aAMTgF,OAAQ,WAEJ/F,KAAKiB,KAAKuC,WAAWxD,OAMzBkF,QAAS,YAGDlF,KAAKkH,WAAalH,KAAKqH,qBAGvBrH,KAAKiB,KAAKC,QAAQC,EAAImH,uBAAwBtI,MAE9CA,KAAK0B,QAAUC,EAAK0D,WAEpBrF,KAAKgB,aAObyE,MAAO,WACCzF,KAAKsH,eAELtH,KAAKqB,SAILrB,KAAKwC,SAASrB,EAAIG,SAAUtB,OAIpCkH,QAAS,WACL,MAASlH,MAAK0B,UAAYC,EAAKC,aAAiB5B,KAAK0B,UAAYC,EAAKiE,SAG1E2C,UAAW,WACP,MAAQvI,MAAK0B,UAAYC,EAAKwE,WAGlCqC,QAAS,WACL,MAAQxI,MAAK0B,UAAYC,EAAK0E,OAGlCoC,UAAW,WACP,MAAQzI,MAAK0B,UAAYC,EAAKiE,SAGlC4B,YAAa,WACT,MAAQxH,MAAK0B,UAAYC,EAAKwE,WAAenG,KAAK0B,UAAYC,EAAK0E,OAGvEiB,aAAc,WACV,MAAOtH,MAAK0B,UAAYC,EAAK0D,YAGjCgC,gBAAiB,WACb,MAAOrH,MAAK0B,UAAYC,EAAK+G,iBAGjCtD,iBAAkB,WACdpF,KAAK0B,QAAUC,EAAK+G,iBAUxBnG,YAAa,SAASxD,EAAOyF,EAAMf,GAC/Be,EAAKf,SAAWA,EAChBe,EAAKvD,KAAKC,QAAQC,EAAI2B,cAAe0B,GACrCA,EAAKvD,KAAKC,QAAQC,EAAIwH,cAAenE,EAAMf,IAS/CjB,SAAU,SAASzD,EAAOyF,GACtBA,EAAK9C,QAAUC,EAAKiE,QACpBpB,EAAKvD,KAAKC,QAAQC,EAAI4B,cAAeyB,GACrCA,EAAKvD,KAAKC,QAAQC,EAAIyH,WAAYpE,IAatC7B,WAAY,SAAS5D,EAAOyF,GACxBA,EAAK9C,QAAUC,EAAKwE,UACpB3B,EAAKvD,KAAKC,QAAQC,EAAI4B,cAAeyB,GACrCA,EAAKvD,KAAKC,QAAQC,EAAI0H,aAAcrE,IASxC9B,SAAU,SAAS3D,EAAOyF,GACtBA,EAAK9C,QAAUC,EAAK0E,MACpB7B,EAAKvD,KAAKC,QAAQC,EAAI4B,cAAeyB,GACrCA,EAAKvD,KAAKC,QAAQC,EAAI2H,WAAYtE,IAM1C,IAAI7C,IACAC,YAAkB,cAClBgE,QAAkB,UAClB8C,gBAAkB,kBAClBrD,WAAkB,aAClBc,UAAkB,YAClBE,MAAkB,SAKlBlF,GAEAyH,WAA8B,aAC9BjD,UAA8B,YAC9BmD,WAA8B,aAC9BD,aAA8B,eAC9BF,cAA8B,gBAC9B5B,aAA8B,eAC9BT,aAA8B,eAC9B7B,qBAA8B,uBAC9BE,oBAA8B,sBAC9BC,0BAA8B,4BAC9BC,iBAA8B,mBAC9ByD,uBAA8B,yBAC9BhD,sBAA8B,wBAG9BhD,YAAc,cACdhB,SAAc,WACdmB,SAAc,WACdrB,WAAc,aACdwB,QAAc,UACdC,YAAc,cAGdC,cAAgB,gBAChBC,cAAgB,iBAIhBgG,IAkBJ,OAXAA,GAAIC,OAAS,SAASvI,GAClB,MAAO,IAAID,GAAQC,IAGvBsI,EAAIrK,QAAU8B,EAAQwB,UAAUtD,QAGhCqK,EAAI5H,IAAMA,EAIH4H,KAGA1K"}